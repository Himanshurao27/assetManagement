<div class="content">
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-12">
				<div class="row">
					<div class="col-sm-12">
						<div class="page-title-box">
							<h4 class="page-title">Asset Manage</h4>
							<ol class="breadcrumb float-right">
								<li class="breadcrumb-item"><a href="/">Dashboard</a></li>
								<li class="breadcrumb-item active">Manage Assets</li>
							</ol>
							<div class="clearfix"></div>
						</div>
						{echo Shared\Markup::message($message ?? null)}
					</div>
				</div>
				<div class="card">
					<div class="card-body">
						<h5 class="card-title">Asset Search</h5>
						<form method="get">
							<div class="form-row">
								<div class="form-group col-sm-2">Asset Name</div>
								<div class="form-group col-sm-2">Status</div>
								<div class="form-group col-sm-2">Type</div>
								<div class="form-group col-sm-2">Vendor</div>
							</div>
							<div class="form-row">
								<div class="form-group col-sm-2">
									<input type="text" name="query[name]" class="form-control" value="{echo $query['name']}" placeholder = "Search asset name">
								</div>
								<div class="form-group col-sm-2">
									<select class="form-control" name="query[status]" value="{echo $query['status'] ?? ''}">
										<option value="">All</option>
										<option value="assigned">Assigned</option>
										<option value="available">Available</option>
										<option value="discarded">Discarded</option>
									</select>
								</div>
								<div class="form-group col-sm-2">
									<select class="form-control" name="query[asset_type]" value="{echo $query['asset_type']}">
										<option value="car">Car</option>
										<option value="laptop">Laptop</option>
										<option value="phone">Phone</option>
										<option value="ipad">Ipad</option>
										<option value="accessories">Accessories</option>
									</select>
								</div>
								<div class="form-group col-sm-2">
									<select class="form-control" name="query[ven_id]" value="{echo $query['ven_id']}">
											{foreach $v in $venders}
											<option value="{echo $v->_id}">({echo $v->name}) {echo $v->company_name}</option>
											{/foreach}
									</select>
								</div>
								<div class="form-group col-sm-1">
									<button type="submit" class="btn btn-outline-primary">
									<i class="fa fa-search"></i> Submit
									</button>
								</div>
							</div>
						</form>
					</div>
				</div><br>
				<div class="card"><br>
					<div class="text-start px-md-2">
					<a class="btn btn-outline-primary"  href="/asset/add" padding="10px"><i class="fa fa-plus"></i> Add new Assets</a>
					</div><br>
					{if $assets}
					<div class="table-responsive">
						<table class="table table-hover" cellspacing="10" cellpadding="10">
							<thead>
								<tr>
									<th>Name</th>
									<th>Type</th>
									<th>Purchase Date</th>
									<th>Vendor</th>
									<th>Description</th>
									<th>Status</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								{foreach $obj in $assets}
								<tr data-id='{echo $obj->_id}'>
									<td>{echo $obj->name}</td>
									<td>{echo $obj->asset_type}</td>
									<td>
										{if $obj->pur_date}
											{echo Framework\TimeZone::printDate($obj->pur_date)}
										{/if}
									</td>
									<td>
										{if $obj->ven_id}
											{script $v = $venders[$obj->ven_id]}
											{if $v}
												({echo $v->name}) {echo $v->company_name}
											{/if}
										{/if}
									</td>
									<td>{echo $obj->description}</td>
									<td>{echo $obj->status}</td>
									<td> <a data-href="/asset/delete/{echo $obj->_id}" class="btn btn-xs btn-outline-danger delete"><i class="fa fa-trash"></i> Delete</a>
									<a class="btn btn-outline-primary"  href="/asset/edit/{echo $obj->_id}" padding="10px"><i class="fa fa-pencil-square-o"></i>Edit</a></td>
								</tr>
								{/foreach}
							</tbody>
						</table>
					</div>
					<nav aria-label="Page navigation example">
						<ul class="pagination justify-content-center">
							{if ($page != 1)}
							<li class="page-item"><a class="page-link" href="{echo Shared\Markup::pagination($page - 1)}">Previous</a></li>
							{/if}
							<li class="page-item"><a class="page-link" href="{echo Shared\Markup::pagination($page + 1)}">Load More</a></li>
						</ul>
					</nav>
					{/if} {else}
					<div class="card-body">
						<p class="card-text">No Assets Found</p>
					</div>
					{/else}
					
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
</script>